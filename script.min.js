// Optimized JavaScript - Mobile Navigation and Core Features
!function(){"use strict";function e(e,t){let n;return function(...o){clearTimeout(n),n=setTimeout((()=>e.apply(this,o)),t)}}function t(e,t,n){const o=document.getElementById(e);o&&o.addEventListener(t,n)}const n=document.getElementById("nav-toggle"),o=document.getElementById("nav-menu"),r=document.getElementById("nav-close"),c=document.querySelectorAll(".nav__link");n&&n.addEventListener("click",(()=>o.classList.add("show-menu"))),r&&r.addEventListener("click",(()=>o.classList.remove("show-menu"))),c.forEach((e=>e.addEventListener("click",(()=>o.classList.remove("show-menu"))))),document.addEventListener("click",(e=>{o&&n&&!o.contains(e.target)&&!n.contains(e.target)&&o.classList.remove("show-menu")}));const l=document.getElementById("header");let a=window.scrollY;function d(){const e=window.scrollY;e>100?(l.style.background="rgba(255, 255, 255, 0.98)",l.style.boxShadow="0 2px 20px rgba(0, 0, 0, 0.1)"):(l.style.background="rgba(255, 255, 255, 0.95)",l.style.boxShadow="none"),a=e}const u=e(d,16);window.addEventListener("scroll",u,{passive:!0}),document.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));if(t){const e=document.querySelector(".header").offsetHeight;window.scrollTo({top:t.offsetTop-e,behavior:"smooth"})}}))}));const s=document.getElementById("contact-form");function i(e,t){const n=document.querySelector(".form-message");n&&n.remove();const o=document.createElement("div");o.className=`form-message form-message--${t}`,o.textContent=e,o.style.cssText=`padding:1rem;border-radius:6px;margin-bottom:1rem;font-weight:500;text-align:center;${"success"===t?"background-color:#dcfce7;color:#166534;border:1px solid #bbf7d0;":"background-color:#fef2f2;color:#dc2626;border:1px solid #fecaca;"}`;const r=document.getElementById("contact-form");r.insertBefore(o,r.firstChild),setTimeout((()=>{o.parentNode&&o.remove()}),5e3)}s&&s.addEventListener("submit",(function(e){e.preventDefault();const t=new FormData(this),n={};t.forEach(((e,t)=>{n[t]=e}));const o=["name","phone","email","service"];let r=!0;o.forEach((e=>{const t=document.getElementById(e),o=n[e];o&&""!==o.trim()?(t.style.borderColor="#d1d5db",t.style.boxShadow="none"):(r=!1,t.style.borderColor="#ef4444",t.style.boxShadow="0 0 0 3px rgba(239, 68, 68, 0.1)")}));const c=document.getElementById("email");n.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)&&(r=!1,c.style.borderColor="#ef4444",c.style.boxShadow="0 0 0 3px rgba(239, 68, 68, 0.1)");const l=document.getElementById("phone");n.phone&&!/^[\+]?[0-9\s\-\(\)]{10,}$/.test(n.phone)&&(r=!1,l.style.borderColor="#ef4444",l.style.boxShadow="0 0 0 3px rgba(239, 68, 68, 0.1)"),r?(i("Thank you! Your message has been received. We will contact you soon.","success"),this.reset(),console.log("Form submitted:",n)):i("Please fill in all required fields correctly.","error")}));const m=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)")}))}),{threshold:.1,rootMargin:"0px 0px -50px 0px"});function g(e){let t=e.value.replace(/\D/g,"");t.startsWith("233")?t="+233 "+t.slice(3):t.startsWith("0")&&(t="+233 "+t.slice(1)),t.startsWith("+233 ")&&(t="+233 "+t.slice(5).replace(/(\d{2})(\d{3})(\d{4})/,"$1 $2 $3")),e.value=t}document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".service__card, .industry__card, .feature, .contact__item").forEach((e=>{e.style.opacity="0",e.style.transform="translateY(20px)",e.style.transition="opacity 0.6s ease, transform 0.6s ease",m.observe(e)}))}));const f=document.getElementById("phone");f&&(f.addEventListener("input",(function(){g(this)})),f.placeholder="+233 XX XXX XXXX"),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll("img[data-src]");if(e.length){const t=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){const n=e.target;n.src=n.dataset.src,n.classList.remove("lazy"),t.unobserve(n)}}))}));e.forEach((e=>t.observe(e)))}})),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/sw.js").then((e=>console.log("SW registered: ",e))).catch((e=>console.log("SW registration failed: ",e)))})),document.addEventListener("DOMContentLoaded",(()=>{const e=["+233539734402","+233206806687"];document.querySelectorAll(".contact__phone").forEach(((t,n)=>{t.addEventListener("click",(o=>{if(o.preventDefault(),confirm("Would you like to call this number? Click Cancel to send a WhatsApp message instead."))window.location.href=t.href;else{const t=e[n]||e[0],o=encodeURIComponent("Hello Gasfalan Services, I would like to inquire about your services.");window.open(`https://wa.me/${t.replace(/\D/g,"")}?text=${o}`,"_blank")}}))}))}))}();